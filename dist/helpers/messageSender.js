"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=_default;var _checkRSS=_interopRequireDefault(require("./checkRSS")),_extra=_interopRequireDefault(require("telegraf/extra"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _default(a,b,c){return async function(){let d=await b.getFeeds(),e=await(0,_checkRSS.default)(c,d);e.reverse().map(async c=>{const d=await b.getFeedListeners(c.url);d.map(b=>{if(c.error)return a.telegram.sendMessage(b,`‚ùå ${c.url} is broken! \nAre you sure that you'd subscribed to the working URL?`),null;try{a.telegram.sendMessage(b,`<b>Title: </b>${c.title}\n<b>From: </b>${c.url}\n\n<i>Description: </i>${c.contentSnippet}...\n\n${c.link}`,_extra.default.HTML())}catch(a){console.log(a)}})}),c=Date.now()}}